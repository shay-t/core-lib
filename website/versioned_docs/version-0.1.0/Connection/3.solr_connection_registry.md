---
id: solr_connection_registry
title: Solr Connection Registry
sidebar_label: Solr Connection Registry
---

SolrConnectionRegistry

 `SolrConnection` provide the `pysolr.Solr`  on every call to the `get` method. The connection is not being closed when exsiting the `"with"` statment.

*core_lib.connection.solr_connection.SolrConnection* [[source]](https://github.com/shay-te/core-lib/blob/master/core_lib/connection/solr_connection.py#L6)

This class gets the `Solr` client on initialization.

```python
class SolrConnection(Connection):
    def __init__(self, solr_client):
        self._solr_client = solr_client
```
**Arguments**

- **`solr_client`**: The Solr client is initialized using the `SolrConnectionRegistry`.



### Example

##### config.yaml

```yaml
core_lib:
	data:
    solr:
      always_commit: true
      url:
          host: ${oc.env:SOLR_HOST}
          port: ${oc.env:SOLR_PORT}
          path: solr
          file: your_core
```

##### your_core_lib.py

```python
from core_lib.connection.solr_connection_registry import SolrConnectionRegistry


class YourCoreLib(CoreLib):
    def __init__(self, conf: DictConfig):
        self.config = conf.core_lib
		    solr = SolrConnectionRegistry(self.config.core_lib.data.solr)  
        self.search = SearchDataAccess(solr)      
```

##### search_data_access.py

```python
class SearchDataAccess(DataAccess):

  def __init__(self, db: SolrConnectionRegistry):
   	 self._db = db    

	def search(self, name: str):
  	with self._db.get() as session:
```



# SolrConnectionRegistry

*core_lib.connection.solr_connection_registry.SolrConnectionRegistry* [[source]](https://github.com/shay-te/core-lib/blob/master/core_lib/connection/solr_connection_registry.py#L9)
`SolrAlchemyConnectionRegistry`  provides a fresh  `SolrAlchemyConnection` connection in the `get()` method. 

## Functions

### \_\_init\_\_()

*core_lib.connection.solr_connection_registry.SolrConnectionRegistry.\_\_init\_\_()* [[source]](https://github.com/shay-te/core-lib/blob/master/core_lib/connection/solr_connection_registry.py#L10)

Responsible for initializing the client

```python
def __init__(self, config: DictConfig):
```

**Arguments**

- **`config`** *`(DictConfig)`*: Solr section config from `Core-Lib's` config.



### get()

*core_lib.connection.solr_connection_registry.SolrConnectionRegistry.get()* [[source]](https://github.com/shay-te/core-lib/blob/master/core_lib/connection/solr_connection_registry.py#L16)

Returns the `SolrConnection` instance.

```python
def get(self, *args, **kwargs) -> SolrConnection:
```

**Arguments**

- __`*args, **kwargs`__: The args and kwargs of the function.

**Returns**

*`(SolrConnection)`*: Returns the `SolrConnection` instance.



### client()

*core_lib.connection.solr_connection_registry.SolrConnectionRegistry.client()* [[source]](https://github.com/shay-te/core-lib/blob/master/core_lib/connection/solr_connection_registry.py#L16)

Returns the client.

```python
def client(self) -> Solr:
```

**Returns**

*`(Solr)`*: Returns the Solr Client.



**Example**

Config File

```yaml
core_lib:
  solr:
    always_commit: true
    url:
        host: localhost
        port: 8983
```
Basic usage

```python

```